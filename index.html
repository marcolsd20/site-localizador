<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cad√™ Voc√™?</title>
<link href="https://fonts.googleapis.com/css2?family=VT323&family=Orbitron:wght@500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
* { box-sizing: border-box; }
body { margin:0; font-family:'VT323',monospace; color:#00ffcc; background:black; overflow-x:hidden; }
canvas#matrix { position:fixed; top:0; left:0; z-index:-1; width:100%; height:100%; background:black; }

header { text-align:center; padding:20px; font-family:'Orbitron',sans-serif; color:#00ffe5; text-shadow:0 0 15px #00ffe5; }
header .radar { font-size:40px; display:inline-block; animation:spin 4s linear infinite; color:#00ffcc; text-shadow:0 0 20px #00ffcc; }
@keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);} }

nav { text-align:center; margin-bottom:20px; }
nav button { display:inline-block; background:transparent; border:2px solid #00ffcc; color:#00ffcc; padding:12px 24px; margin:10px; border-radius:10px; font-size:18px; cursor:pointer; text-shadow:0 0 10px #00ffcc; box-shadow:0 0 20px rgba(0,255,204,0.6); transition: all 0.2s; }
nav button:hover { background:#00ffcc; color:black; box-shadow:0 0 30px #00ffcc,0 0 60px #00ffcc; }

.section { display:none; text-align:center; padding:20px; }
.section.active { display:block; }

.btn { display:inline-block; background:transparent; border:2px solid #00ffcc; color:#00ffcc; padding:10px 20px; margin-top:15px; border-radius:10px; font-size:18px; cursor:pointer; text-shadow:0 0 10px #00ffcc; box-shadow:0 0 20px rgba(0,255,204,0.6); transition: all 0.2s; }
.btn:hover { background:#00ffcc; color:black; box-shadow:0 0 30px #00ffcc,0 0 60px #00ffcc; }

#login-modal,#register-modal { position:fixed; inset:0; background:rgba(0,0,0,0.85); display:none; align-items:center; justify-content:center; z-index:9999; }
#login-modal .content,#register-modal .content { background:#111; border:2px solid #00ffcc; padding:30px; border-radius:15px; text-align:center; color:#00ffcc; box-shadow:0 0 25px #00ffcc; max-width:400px; width:90%; animation:pulse 2s infinite; }
@keyframes pulse { 0%,100%{box-shadow:0 0 20px #00ffcc;} 50%{box-shadow:0 0 40px #00ffcc;} }

.hidden{ display:none; }
.loading-text{ margin-top:20px; font-size:18px; }

.floating-btn{ position:fixed; bottom:20px; right:20px; z-index:999; background:#00ffcc; color:black; border:none; padding:15px 20px; border-radius:50px; font-size:18px; cursor:pointer; box-shadow:0 0 20px #00ffcc; transition: all 0.2s; }
.floating-btn:hover{ background:#00ffe5; box-shadow:0 0 30px #00ffcc,0 0 60px #00ffcc; }
</style>
</head>
<body>
<canvas id="matrix"></canvas>
<header>
    <div class="radar">üì°</div>
    <h1>CAD√ä VOC√ä?</h1>
    <p>> Localizador futurista de localiza√ß√£o e mensagens</p>
</header>

<nav>
    <button onclick="mostrarAba('localizador')">üìç Localizar Pessoa</button>
    <button onclick="mostrarAba('whatsapp')">üí¨ Extrair WhatsApp</button>
</nav>

<main>
<section id="localizador" class="section active">
    <h2>üîç Localizar Pessoa</h2>
    <input id="inputTarget" type="text" placeholder="Digite n√∫mero ou e-mail" class="btn" style="width:70%; text-align:center;">
    <br>
    <button id="btnLocalizar" class="btn">Iniciar Rastreamento</button>
    <div id="loadingLocalizacao" class="loading-text hidden">‚è≥ Simulando rastreamento...</div>
</section>

<section id="whatsapp" class="section">
    <h2>üí¨ Extrair Mensagens do WhatsApp</h2>
    <input id="inputWhats" type="text" placeholder="Digite n√∫mero do WhatsApp" class="btn" style="width:70%; text-align:center;">
    <br>
    <button id="btnWhats" class="btn">Extrair Mensagens</button>
    <div id="loadingWhats" class="loading-text hidden">‚è≥ Acessando servidor do WhatsApp...</div>
</section>
</main>

<!-- Login / Registro Supabase -->
<div id="login-modal">
<div class="content">
<h2>üîê Login</h2>
<input type="text" id="login-email" placeholder="E-mail" class="btn" style="width:80%; margin:5px 0;">
<input type="password" id="login-senha" placeholder="Senha" class="btn" style="width:80%; margin:5px 0;">
<br>
<button id="btnLogin" class="btn">Entrar</button>
<button id="btnRegistrarTela" class="btn">Criar Conta</button>
</div>
</div>

<div id="register-modal">
<div class="content">
<h2>üìù Criar Conta</h2>
<input type="text" id="register-email" placeholder="E-mail" class="btn" style="width:80%; margin:5px 0;">
<input type="password" id="register-senha" placeholder="Senha" class="btn" style="width:80%; margin:5px 0;">
<br>
<button id="btnRegister" class="btn">Registrar</button>
<button id="btnVoltarRegister" class="btn">Voltar</button>
</div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
<script>
// Matrix Background
const canvas=document.getElementById("matrix"),ctx=canvas.getContext("2d");
canvas.height=window.innerHeight; canvas.width=window.innerWidth;
const letters="01",fontSize=14,columns=canvas.width/fontSize,drops=Array(Math.floor(columns)).fill(1);
function draw(){ ctx.fillStyle="rgba(0,0,0,0.1)"; ctx.fillRect(0,0,canvas.width,canvas.height);
ctx.fillStyle="#00ffcc"; ctx.font=fontSize+"px monospace";
for(let i=0;i<drops.length;i++){ const text=letters[Math.floor(Math.random()*letters.length)]; ctx.fillText(text,i*fontSize,drops[i]*fontSize);
if(drops[i]*fontSize>canvas.height&&Math.random()>0.975)drops[i]=0; drops[i]++; } }
setInterval(draw,33);

// Abas
function mostrarAba(id){ document.querySelectorAll('.section').forEach(sec=>sec.classList.remove('active')); document.getElementById(id).classList.add('active'); }

// --- Supabase ---
const SUPABASE_URL = 'https://jyhemlmxsoqheirmivdn.supabase.co';
const SUPABASE_ANON_KEY = 'COLOQUE_SUA_CHAVE_ANON';
const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// Mostrar login ao abrir
window.onload = ()=>{ document.getElementById('login-modal').style.display='flex'; };

// Login
document.getElementById("btnLogin").addEventListener("click", async ()=>{
    const email = document.getElementById("login-email").value.trim();
    const senha = document.getElementById("login-senha").value.trim();
    if(!email||!senha){ alert("Preencha e-mail e senha!"); return; }
    const { data, error } = await supabase.auth.signInWithPassword({ email, password: senha });
    if(error){ alert(error.message); return; }
    document.getElementById('login-modal').style.display='none';
});

// Registro
document.getElementById("btnRegister").addEventListener("click", async ()=>{
    const email = document.getElementById("register-email").value.trim();
    const senha = document.getElementById("register-senha").value.trim();
    if(!email||!senha){ alert("Preencha e-mail e senha!"); return; }
    const { data, error } = await supabase.auth.signUp({ email, password: senha });
    if(error){ alert(error.message); return; }
    alert("Conta criada! Fa√ßa login.");
    document.getElementById('register-modal').style.display='none';
    document.getElementById('login-modal').style.display='flex';
});

document.getElementById("btnRegistrarTela").addEventListener("click", ()=>{
    document.getElementById('login-modal').style.display='none';
    document.getElementById('register-modal').style.display='flex';
});
document.getElementById("btnVoltarRegister").addEventListener("click", ()=>{
    document.getElementById('register-modal').style.display='none';
    document.getElementById('login-modal').style.display='flex';
});
</script>
</body>
</html>
