<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cad√™ Voc√™?</title>
<link href="https://fonts.googleapis.com/css2?family=VT323&family=Orbitron:wght@500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
* { box-sizing: border-box; }
body { margin:0; font-family:'VT323',monospace; color:#00ffcc; background:black; overflow-x:hidden; }
canvas#matrix { position:fixed; top:0; left:0; z-index:-1; width:100%; height:100%; background:black; }
header { text-align:center; padding:20px; font-family:'Orbitron',sans-serif; color:#00ffe5; text-shadow:0 0 15px #00ffe5; }
header .radar { font-size:40px; display:inline-block; animation:spin 4s linear infinite; color:#00ffcc; text-shadow:0 0 20px #00ffcc; }
@keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);} }
nav { text-align:center; margin-bottom:20px; }
nav button { display:inline-block; background:transparent; border:2px solid #00ffcc; color:#00ffcc; padding:12px 24px; margin:10px; border-radius:10px; font-size:18px; cursor:pointer; text-shadow:0 0 10px #00ffcc; box-shadow:0 0 20px rgba(0,255,204,0.6); transition: all 0.2s; }
nav button:hover { background:#00ffcc; color:black; box-shadow:0 0 30px #00ffcc,0 0 60px #00ffcc; }
.section { display:none; text-align:center; padding:20px; }
.section.active { display:block; }
.btn { display:inline-block; background:transparent; border:2px solid #00ffcc; color:#00ffcc; padding:10px 20px; margin-top:15px; border-radius:10px; font-size:18px; cursor:pointer; text-shadow:0 0 10px #00ffcc; box-shadow:0 0 20px rgba(0,255,204,0.6); transition: all 0.2s; }
.btn:hover { background:#00ffcc; color:black; box-shadow:0 0 30px #00ffcc,0 0 60px #00ffcc; }
#paywall-modal,#login-modal,#register-modal { position:fixed; inset:0; background:rgba(0,0,0,0.85); display:none; align-items:center; justify-content:center; z-index:9999; }
#paywall-modal .content,#login-modal .content,#register-modal .content { background:#111; border:2px solid #00ffcc; padding:30px; border-radius:15px; text-align:center; color:#00ffcc; box-shadow:0 0 25px #00ffcc; max-width:400px; width:90%; animation:pulse 2s infinite; }
@keyframes pulse { 0%,100%{box-shadow:0 0 20px #00ffcc;} 50%{box-shadow:0 0 40px #00ffcc;} }
.hidden{ display:none; }
.loading-text{ margin-top:20px; font-size:18px; }
.sim-log{ text-align:left; background:#111; color:#00ffcc; padding:10px; border-radius:8px; max-height:400px; overflow:auto; font-size:14px; box-shadow:0 0 15px #00ffcc; display:flex; flex-direction:column; }
.result{ margin-top:15px; font-size:18px; font-weight:bold; }
.fade-in{ opacity:0; transform: scale(0.95); animation: fadeIn 1s forwards; }
@keyframes fadeIn{to{opacity:1;transform: scale(1);} }
.floating-btn{ position:fixed; bottom:20px; right:20px; z-index:999; background:#00ffcc; color:black; border:none; padding:15px 20px; border-radius:50px; font-size:18px; cursor:pointer; box-shadow:0 0 20px #00ffcc; transition: all 0.2s; }
.floating-btn:hover{ background:#00ffe5; box-shadow:0 0 30px #00ffcc,0 0 60px #00ffcc; }
#map{ width:90%; height:220px; border-radius:10px; box-shadow:0 0 20px #00ffcc; margin: 10px auto; filter:blur(8px); }
#assinatura-template{ display:none; text-align:center; margin-top:20px; padding:20px; border:2px solid #00ffcc; border-radius:15px; font-size:18px; max-width:400px; margin-left:auto; margin-right:auto; box-shadow:0 0 25px #00ffcc; }
#imgWhats{ width:320px; margin-top:20px; border-radius:15px; box-shadow:0 0 30px #00ffcc,0 0 50px #00ffe5; }
#whatsapp h2{ color:#00ffcc; text-shadow:0 0 15px #00ffe5,0 0 30px #00ffcc; font-size:28px; }
#logWhats{ background:#111; color:#00ffcc; padding:15px; border-radius:10px; max-height:300px; overflow:auto; font-size:14px; box-shadow:0 0 20px #00ffcc,0 0 40px #00ffe5; }
#btnWhatsFlutuante{ position:fixed; bottom:90px; right:20px; z-index:999; background:#00ffcc; color:black; border:none; padding:15px 20px; border-radius:50px; font-size:20px; cursor:pointer; box-shadow:0 0 25px #00ffcc,0 0 50px #00ffe5; transition: all 0.2s; }
#btnWhatsFlutuante:hover{ background:#00ffe5; box-shadow:0 0 35px #00ffcc,0 0 70px #00ffe5; }
</style>
</head>
<body>
<canvas id="matrix"></canvas>
<header>
    <div class="radar">üì°</div>
    <h1>CAD√ä VOC√ä?</h1>
    <p>> Localizador futurista de localiza√ß√£o e mensagens</p>
</header>

<nav>
    <button onclick="mostrarAba('localizador')">üìç Localizar Pessoa</button>
    <button onclick="mostrarAba('whatsapp')">üí¨ Extrair WhatsApp</button>
</nav>

<main>
<section id="localizador" class="section active">
    <h2>üîç Localizar Pessoa</h2>
    <input id="inputTarget" type="text" placeholder="Digite n√∫mero ou e-mail" class="btn" style="width:70%; text-align:center;">
    <br>
    <button id="btnLocalizar" class="btn">Iniciar Rastreamento</button>
    <div id="loadingLocalizacao" class="loading-text hidden">‚è≥ Simulando rastreamento...</div>
    <div id="logLocalizacao" class="sim-log hidden"></div>
    <p id="resultadoLocalizacao" class="result hidden"></p>
    <div id="map" class="hidden"></div>
    <div id="assinatura-template">
        <h3>‚úÖ Achamos a localiza√ß√£o!</h3>
        <p>Assine agora para desbloquear todos os detalhes da localiza√ß√£o da pessoa.</p>
        <a href="https://seu-link-de-assinatura.com" target="_blank" class="btn" id="btnAssinar">ASSINAR AGORA</a>
    </div>
</section>

<section id="whatsapp" class="section">
    <h2>üí¨ Extrair Mensagens do WhatsApp</h2>
    <input id="inputWhats" type="text" placeholder="Digite n√∫mero do WhatsApp" class="btn" style="width:70%; text-align:center;">
    <br>
    <button id="btnWhats" class="btn">Extrair Mensagens</button>
    <div id="loadingWhats" class="loading-text hidden">‚è≥ Acessando servidor do WhatsApp...</div>
    <div id="logWhats" class="sim-log hidden"></div>
    <p id="resultadoWhats" class="result hidden"></p>
    <img id="imgWhats" src="como-fixar-conversas-ou-grupos-no-topo-do-whatsapp-androidios-captura-de-tela.jpg" class="hidden fade-in" alt="WhatsApp Simulado">
    <button class="floating-btn" id="btnWhatsFlutuante">üí¨ Ver WhatsApp</button>
</section>
</main>

<!-- Modais -->
<div id="login-modal">
<div class="content">
<h2>üîê Login Necess√°rio</h2>
<input type="text" id="login-usuario" placeholder="Usu√°rio" class="btn" style="width:80%; margin:5px 0;">
<input type="password" id="login-senha" placeholder="Senha" class="btn" style="width:80%; margin:5px 0;">
<br>
<button id="btnLogin" class="btn">Entrar</button>
<button id="btnRegistrarTela" class="btn">Criar Conta</button>
</div>
</div>

<div id="register-modal">
<div class="content">
<h2>üìù Criar Conta</h2>
<input type="text" id="register-usuario" placeholder="Usu√°rio" class="btn" style="width:80%; margin:5px 0;">
<input type="password" id="register-senha" placeholder="Senha" class="btn" style="width:80%; margin:5px 0;">
<br>
<button id="btnRegister" class="btn">Registrar</button>
<button id="btnVoltarRegister" class="btn">Voltar</button>
</div>
</div>

<div id="paywall-modal">
<div class="content">
<h2>üöÄ Assinatura Necess√°ria</h2>
<p>Para desbloquear o resultado, assine agora:</p>
<p style="font-size:24px; font-weight:bold;">R$ 24,99</p>
<a href="https://seu-link-de-assinatura.com" target="_blank" class="btn" id="btnAssinar">ASSINAR AGORA</a>
<br>
<button id="cancelar-assinatura" class="btn">Cancelar</button>
</div>
</div>

<button class="floating-btn" id="btnFlutuante">ASSINAR</button>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script type="module">
import { SUPABASE_URL, SUPABASE_KEY } from './config.js';
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

// --- Matrix ---
const canvas=document.getElementById("matrix"),ctx=canvas.getContext("2d");
canvas.height=window.innerHeight; canvas.width=window.innerWidth;
const letters="01",fontSize=14,columns=canvas.width/fontSize,drops=Array(Math.floor(columns)).fill(1);
function draw(){ ctx.fillStyle="rgba(0,0,0,0.1)"; ctx.fillRect(0,0,canvas.width,canvas.height);
ctx.fillStyle="#00ffcc"; ctx.font=fontSize+"px monospace";
for(let i=0;i<drops.length;i++){ const text=letters[Math.floor(Math.random()*letters.length)]; ctx.fillText(text,i*fontSize,drops[i]*fontSize);
if(drops[i]*fontSize>canvas.height&&Math.random()>0.975)drops[i]=0; drops[i]++; } }
setInterval(draw,33);

// --- Abas ---
function mostrarAba(id){ document.querySelectorAll('.section').forEach(sec=>sec.classList.remove('active')); document.getElementById(id).classList.add('active'); }

// --- Localizador e WhatsApp ---
// (Mesma l√≥gica de simula√ß√£o do seu c√≥digo original)

window.onload = ()=>{ document.getElementById('login-modal').style.display='flex'; };

// --- Login / Registro Supabase ---
const btnLoginEl = document.getElementById("btnLogin");
const btnRegisterEl = document.getElementById("btnRegister");
const btnRegistrarTela = document.getElementById("btnRegistrarTela");
const btnVoltarRegister = document.getElementById("btnVoltarRegister");

btnLoginEl.addEventListener("click", async ()=>{
    const usuario = document.getElementById("login-usuario").value.trim();
    const senha = document.getElementById("login-senha").value.trim();
    if(!usuario || !senha) return alert("Preencha usu√°rio e senha!");
    const { data, error } = await supabase.auth.signInWithPassword({ email: usuario, password: senha });
    if(error) return alert(error.message);
    alert("Login realizado!");
    document.getElementById('login-modal').style.display='none';
    mostrarAba('localizador');
});

btnRegisterEl.addEventListener("click", async ()=>{
    const usuario = document.getElementById("register-usuario").value.trim();
    const senha = document.getElementById("register-senha").value.trim();
    if(!usuario || !senha) return alert("Preencha usu√°rio e senha!");
    const { data, error } = await supabase.auth.signUp({ email: usuario, password: senha });
    if(error) return alert(error.message);
    alert("Conta criada! Fa√ßa login.");
    document.getElementById('register-modal').style.display='none';
    document.getElementById('login-modal').style.display='flex';
});

// Abrir tela de registro
btnRegistrarTela.addEventListener("click", ()=>{
    document.getElementById('login-modal').style.display='none';
    document.getElementById('register-modal').style.display='flex';
});

// Voltar do registro
btnVoltarRegister.addEventListener("click", ()=>{
    document.getElementById('register-modal').style.display='none';
    document.getElementById('login-modal').style.display='flex';
});

// --- Paywall ---
document.querySelectorAll("#btnAssinar").forEach(btn=>{
    btn.addEventListener("click", ()=>{ document.getElementById("paywall-modal").style.display="none"; });
});
document.getElementById("cancelar-assinatura").addEventListener("click", ()=>{
    document.getElementById("paywall-modal").style.display="none";
});
</script>
</body>
</html>
